<div class="page">
    <div class="panel">

      <button [ngStyle]="{ 'opacity': !kupovinaFlag ? '0.5' : '1'}" class="users-button" (click)="switchToKupovina()">
        Kupovina
      </button>
      <button [ngStyle]="{ 'opacity': !zahteviFlag ? '0.5' : '1'}" class="employees-button" (click)="switchToZahtevi()">
        Zahtevi
      </button>
      <button [ngStyle]="{ 'opacity': !ponudeFlag ? '0.5' : '1'}" class="employees-button" (click)="switchToPonude()">
        Ponude
      </button>
      <button class="myButtonPrimary" (click)="refreshData()">Refresh</button>
      <div class="table">
        <div class="header">

        </div>
<!-- KUPOVINA -->
        <mat-table *ngIf="kupovinaFlag" [dataSource]="stocksData" matSort>
          <ng-container *ngFor="let column of kupovinaColumns" [matColumnDef]="column">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ column | titlecase }}
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <ng-container *ngIf="column === 'Količina'">
                {{ element['amount'] }}
              </ng-container>
              <ng-container *ngIf="column === 'Vlasnik'">
                <div *ngIf="element['owner'] === 1">
                  Banka 1
                </div>
                <div *ngIf="element['owner'] === 2">
                  Banka 2
                </div>
                <div *ngIf="element['owner'] === 4">
                  Banka 4
                </div>
              </ng-container>
              <ng-container *ngIf="column === 'Hartija'">
                <strong><p>{{ element['ticker'] }}</p></strong>
              </ng-container>
              <ng-container *ngIf="column === 'Opcije'">
                <button (click)="buttonBuy(element)" class="button">Kupi</button>
              </ng-container>
            </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="kupovinaColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: kupovinaColumns;"></mat-row>
        </mat-table>

<!-- ZAHTEVI -->
        <mat-table *ngIf="zahteviFlag" [dataSource]="sentData" matSort>
          <ng-container *ngFor="let column of zahteviColumns" [matColumnDef]="column">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ column | titlecase }}
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <ng-container *ngIf="column === 'Količina'">
                {{ element['amount'] }}
              </ng-container>
              <ng-container *ngIf="column === 'Cena'">
                {{ element['price'] }} RSD
              </ng-container>
              <ng-container *ngIf="column === 'Vlasnik'">
                <div *ngIf="element['owner'] === 1">
                  Banka 1
                </div>
                <div *ngIf="element['owner'] === 2">
                  Banka 2
                </div>
                <div *ngIf="element['owner'] === 4">
                  Banka 4
                </div>
              </ng-container>
              <ng-container *ngIf="column === 'Hartija'">
                <strong><p>{{ element['ticker'] }}</p></strong>
              </ng-container>
              <ng-container *ngIf="column === 'Status'">
                  {{element['offerStatus']}}
              </ng-container>
              <ng-container *ngIf="column === 'Opcije'">
                <button (click)="deleteMyOffer(element['myOfferId'])" class="button2">Delete</button>
              </ng-container>

            </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="zahteviColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: zahteviColumns;"></mat-row>
        </mat-table>


<!-- PONUDE -->
        <mat-table *ngIf="ponudeFlag" [dataSource]="receivedData" matSort>
          <ng-container *ngFor="let column of ponudeColumns" [matColumnDef]="column">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ column | titlecase }}
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <ng-container *ngIf="column === 'Količina'">
                {{ element['amount'] }}
              </ng-container>
              <ng-container *ngIf="column === 'idBank'">
                {{ element['idBank'] }}
              </ng-container>
              <ng-container *ngIf="column === 'Vlasnik'">
                <div *ngIf="element['owner'] === 1">
                  Banka 1
                </div>
                <div *ngIf="element['owner'] === 2">
                  Banka 2
                </div>
                <div *ngIf="element['owner'] === 4">
                  Banka 4
                </div>
              </ng-container>
              <ng-container *ngIf="column === 'Cena'">
                {{ element['price'] }} RSD
              </ng-container>
              <ng-container *ngIf="column === 'Hartija'">
                <strong><p>{{ element['ticker'] }}</p></strong>
              </ng-container>
              <ng-container *ngIf="column === 'Status'">
                <strong><p>{{ element['offerStatus'] }}</p></strong>
              </ng-container>
              <ng-container *ngIf="column === 'Opcije'">

                <!-- PRIHVACENO, ODBIJENO, U OBRADI -->
                <button *ngIf="element['offerStatus'] === 'PROCESSING'" (click)="acceptOffer(element)" class="button">Prihvati</button>
                <button *ngIf="element['offerStatus'] === 'PROCESSING'" (click)="declineOffer(element)" class="button2">Odbij</button>
                <button (click)="deleteOffer(element['offerId'])" class="button2">Delete</button>

                <div *ngIf="element['sellerCertificate'] === 'ACCEPTED' || element['sellerCertificate'] === 'FINISHED_ACCEPTED'" class="img">
                  <img src="../../../../assets/circle-check-svgrepo-com.svg" alt="accepted">
                </div>
                <div *ngIf="element['sellerCertificate'] === 'DECLINED' || element['sellerCertificate'] === 'FINISHED_DECLINED'" class="img">
                  <img src="../../../../assets/circle-quarters-svgrepo-com.svg" alt="declined">
                </div>
              </ng-container>
            </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="ponudeColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: ponudeColumns;"></mat-row>
        </mat-table>

      </div>
    </div>
  </div>





